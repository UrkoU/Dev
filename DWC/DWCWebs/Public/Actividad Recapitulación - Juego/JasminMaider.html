<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Juego</title>
  </head>
  <script
    language="JavaScript"
    src="http://185.60.40.210/2daw3/FuncionesJuegos.js"
  ></script>
  <body>
    <script>
      const N = 3;
      var aMiJuego = CrearTabla(N);
      var f0 = N - 1;
      var c0 = N - 1;

      MostrarTabla();

      function MostrarTabla() {
        //Primero paso es crear la tabla
        document.write(`<table border="1">`);
        for (i = 0; i < N; i++) {
          document.write(`<tr>`);

          for (j = 0; j < N; j++) {
            document.write(
              `<td><img id="imBola${i + "" + j}" src="numbers/n${
                aMiJuego[i][j]
              }.gif" width="102" height="98" alt="" onclick="Cambiar(${i},${j})"'"/></td>`
            );
          }
        }

        document.write(`</tr>`);

        document.write(`</table>`);
      }

      function Cambiar(i, j) {
        if (
          (i + 1 == f0 && j == c0) ||
          (i - 1 == f0 && j == c0) ||
          (i == f0 && j + 1 == c0) ||
          (i == f0 && j - 1 == c0)
        ) {
          aMiJuego[f0][c0] = aMiJuego[i][j];
          aMiJuego[i][j] = 0;

          // Intercambiar las imagenes del click y la vacia
          document.getElementById(`imBola${i + "" + j}`).src = `numbers/n0.gif`; // Colocar en la posicion del click la vacia
          document.getElementById(
            `imBola${f0 + "" + c0}`
          ).src = `numbers/n${aMiJuego[f0][c0]}.gif`; // Colocar en la posicion de la vacia el numero del click

          // Guardar nueva ubicacion del vacio tras intercambiar las iamgenes
          f0 = i;
          c0 = j;

          resuelto(aMiJuego);
        }
      }

      function resuelto(aMiJuego) {
        var anterior = aMiJuego[0][0];
        var bResuelto = false;
        for (i = 0; i < aMiJuego.length; i++) {
          for (j = 0; j < aMiJuego[i].length; j++) {
            // j++;
            if (anterior < aMiJuego[i][j]) {
              bResuelto = true;
              anterior = aMiJuego[i][j];
            }
          }
        }
        if (bResuelto == true && aMiJuego[i][j] == aMiJuego[f0][c0]) {
          alert("Esta resuelto");
        }
      }
    </script>
  </body>
</html>
