{"mappings":"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","sources":["scripts/main.js"],"sourcesContent":["let aBalizas = [];\r\nlet oTiempo = {};\r\n\r\nlet sColorPrincipal = \"\";\r\nlet sColorSecundario = \"\";\r\n\r\nlet bLogueado = \"\";\r\n\r\nlet tTimeout;\r\n\r\nlet iconoDefecto;\r\n\r\n// Máximo de Marcadores guardados\r\nlet iMaxGuardados = 5;\r\n\r\nfunction PreLogin() {\r\n  CargarLocalStorage();\r\n  CargarColorInicial();\r\n  CargarBotonesColor();\r\n  CrearSlider();\r\n}\r\n\r\nfunction PostLogin() {\r\n  var promesa2 = GetOpcionesUsuario(usuario.id);\r\n  promesa2.then((res) => {\r\n    aGuardados = JSON.parse(res);\r\n    OcultarLogin();\r\n    CargarMapa();\r\n    ObtenerBalizas();\r\n    setInterval(ActualizarDatos, 10000);\r\n  });\r\n}\r\n\r\n$(\"document\").ready(function () {\r\n  PreLogin();\r\n  if (bLogueado == true || bLogueado == \"true\") {\r\n    PostLogin();\r\n  } else {\r\n    MostrarLogin();\r\n  }\r\n});\r\n\r\nfunction ObtenerBalizas() {\r\n  var promise = GetBalizas();\r\n  promise.then(function (data) {\r\n    aBalizas = JSON.parse(data);\r\n    CargarMarcadores();\r\n    CargarCartas(aGuardados);\r\n  });\r\n}\r\n\r\nfunction ObtenerTiempo(id) {\r\n  var promise = GetTiempo(id);\r\n  promise.then(function (data) {\r\n    oTiempo = JSON.parse(data);\r\n    AnadirCarta(oTiempo);\r\n  });\r\n}\r\n\r\n$(\"#mapTop\").click(() => {\r\n  $(\"#map\").toggle();\r\n});\r\n\r\nfunction MostrarLogin() {\r\n  $(\"#divBlur\").css(\"display\", \"flex\");\r\n  $(\"#divLoginContainer\").css(\"display\", \"flex\");\r\n  $(\"#divLogin\").css(\"display\", \"flex\");\r\n}\r\n\r\nfunction OcultarLogin() {\r\n  $(\"#divBlur\").css(\"display\", \"none\");\r\n  $(\"#divLoginContainer\").css(\"display\", \"none\");\r\n  $(\"#divLogin\").css(\"display\", \"none\");\r\n}\r\n\r\nfunction MostrarCartaGrande(oTiempo, oOpciones) {\r\n  console.log(oTiempo);\r\n  console.log(oOpciones);\r\n  console.log(\"Not implemented\");\r\n}\r\n\r\nfunction MostrarError(error = limitError) {\r\n  clearTimeout(tTimeout);\r\n  $(\"#divError\").text(error);\r\n  // Mostrar error, esperar 2 segundos, ocultar\r\n  $(\"#divError\").removeClass(\"hidden\");\r\n  tTimeout = setTimeout(() => {\r\n    $(\"#divError\").addClass(\"hidden\");\r\n  }, 2000);\r\n}\r\n\r\nfunction CargarCartas(balizas) {\r\n  // if (oGuardados[test].length >= 0)\r\n  balizas.forEach((element) => {\r\n    ObtenerTiempo(element.codigoBaliza);\r\n  });\r\n}\r\n\r\nfunction CargarColorInicial() {\r\n  // Carga el color inicial según el local storage\r\n  let sValor, sValorSecundario;\r\n  aColores.forEach((element) => {\r\n    if (element.nombre == sColorPrincipal) {\r\n      sValor = element.valor;\r\n    }\r\n    if (element.nombre == sColorSecundario) sValorSecundario = element.valor;\r\n  });\r\n\r\n  CambiarColorPrimario(sColorPrincipal, sValor, true);\r\n  CambiarColorSecundario(sColorSecundario, sValorSecundario);\r\n}\r\n\r\nfunction CambiarColorPrimario(sColor, sValor, bInicio = false) {\r\n  // Cambia el color predominante de la web, cambiando la variable --main-color del css\r\n  localStorage.setItem(\"sColorPrimario\", sColor);\r\n  document.documentElement.style.setProperty(\"--main-color\", sValor);\r\n  iconoDefecto = L.icon({\r\n    iconUrl: `../images/marker-${sColor}.png`,\r\n    iconSize: [41, 41],\r\n  });\r\n  if (!bInicio) CargarMarcadores();\r\n  // document.getElementsByTagName(\"body\")[0].style.backgroundImage = `url('imagenes/background-${sColor}.png')`;\r\n}\r\n\r\nfunction CambiarColorSecundario(sColor, sValor) {\r\n  localStorage.setItem(\"sColorSecundario\", sColor);\r\n  document.documentElement.style.setProperty(\"--secondary-color\", sValor);\r\n}\r\n\r\nfunction CargarBotonesColor() {\r\n  // Carga los botones de los colores != mainColor\r\n  let divColoresPrincipales = document.getElementById(\"divColoresPrincipales\");\r\n  let divColoresSecundarios = document.getElementById(\"divColoresSecundarios\");\r\n\r\n  sColorPrincipal = localStorage.getItem(\"sColorPrimario\");\r\n  sColorSecundario = localStorage.getItem(\"sColorSecundario\");\r\n  aColores.forEach((oColor) => {\r\n    // Si no es el color principal, añade el botón\r\n    divColoresPrincipales.innerHTML += `<button class=\"color-button color-button-small\" style=\"background-color: ${oColor.valor}\" onclick=\"CambiarColorPrimario('${oColor.nombre}', '${oColor.valor}')\"></button>`;\r\n    divColoresSecundarios.innerHTML += `<button class=\"color-button color-button-small\" style=\"background-color: ${oColor.valor}\" onclick=\"CambiarColorSecundario('${oColor.nombre}', '${oColor.valor}')\"></button>`;\r\n  });\r\n}\r\n\r\n// Gif de ajustes en hover\r\n$(\".settings\").hover(function () {\r\n  $(this).css(\"background\", \"url(../images/settings.gif)\");\r\n  $(this).css(\"background-repeat\", \"no-repeat\");\r\n  $(this).css(\"background-position\", \"center\");\r\n  $(this).css(\"background-size\", \"3.5em\");\r\n});\r\n\r\n$(\".settings\").mouseleave(function () {\r\n  $(this).css(\"background\", \"url(../images/settings-stopped.gif)\");\r\n  $(this).css(\"background-repeat\", \"no-repeat\");\r\n  $(this).css(\"background-position\", \"center\");\r\n  $(this).css(\"background-size\", \"3.5em\");\r\n});\r\n\r\n// Eventos botón flotante\r\n$(\"#show\").on(\"mouseover\", function () {\r\n  $(\"#colores\").removeClass(\"hidden\");\r\n});\r\n$(\"#show\").on(\"mouseout\", function () {\r\n  $(\"#colores\").addClass(\"hidden\");\r\n});\r\n"],"names":[],"version":3,"file":"index.bc1e96c0.js.map","sourceRoot":"/__parcel_source_root/"}