{"mappings":"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","sources":["scripts/main.js"],"sourcesContent":["let aBalizas = [];\r\nlet oTiempo = {};\r\n\r\nlet sColorPrincipal = \"\";\r\nlet sColorSecundario = \"\";\r\n\r\nlet bLogueado = \"\";\r\n\r\nlet tTimeout;\r\n\r\nlet iconoDefecto;\r\n\r\nlet aGuardados = new Set();\r\n\r\n$(\"document\").ready(function () {\r\n  CargarLocalStorage();\r\n  CargarColorInicial();\r\n  CargarBotonesColor();\r\n  if (bLogueado == true || bLogueado == \"true\") {\r\n    console.log(\"HERE\" + bLogueado);\r\n    CargarMapa();\r\n\r\n    ObtenerBalizas();\r\n  } else {\r\n    console.log(\"Not logged\");\r\n    MostrarLogin();\r\n  }\r\n});\r\n\r\nfunction ObtenerBalizas() {\r\n  var promise = GetBalizas();\r\n  promise.then(function (data) {\r\n    aBalizas = JSON.parse(data);\r\n    CargarMarcadores();\r\n    CargarCartas(aGuardados);\r\n  });\r\n}\r\n\r\nfunction ObtenerTiempo(id = \"C080\") {\r\n  var promise = GetTiempo(id);\r\n  promise.then(function (data) {\r\n    oTiempo = JSON.parse(data);\r\n    let oBaliza = aBalizas.find((element) => element.codigo == id);\r\n    console.log(\"OBALIZA\" + oBaliza);\r\n    AnadirTiempo(oTiempo, oBaliza);\r\n  });\r\n}\r\n\r\n$(\"#mapTop\").click(() => {\r\n  $(\"#map\").toggle(\"fade\", 100);\r\n});\r\n\r\nfunction MostrarLogin() {\r\n  $(\"#divBlur\").css(\"display\", \"flex\");\r\n  $(\"#divLoginContainer\").css(\"display\", \"flex\");\r\n  $(\"#divLogin\").css(\"display\", \"flex\");\r\n}\r\n\r\nfunction OcultarLogin() {\r\n  $(\"#divBlur\").css(\"display\", \"none\");\r\n  $(\"#divLoginContainer\").css(\"display\", \"none\");\r\n  $(\"#divLogin\").css(\"display\", \"none\");\r\n}\r\n\r\nfunction MostrarError(error = limitError) {\r\n  clearTimeout(tTimeout);\r\n  $(\"#divError\").text(error);\r\n  // Mostrar error, esperar 2 segundos, ocultar\r\n  $(\"#divError\").removeClass(\"hidden\");\r\n  tTimeout = setTimeout(() => {\r\n    $(\"#divError\").addClass(\"hidden\");\r\n  }, 2000);\r\n}\r\n\r\nfunction CargarCartas(balizas) {\r\n  // if (oGuardados[test].length >= 0)\r\n  balizas.forEach((element) => {\r\n    console.log(element);\r\n    ObtenerTiempo(element);\r\n  });\r\n}\r\n\r\nfunction CargarColorInicial() {\r\n  // Carga el color inicial según el local storage\r\n  let sValor, sValorSecundario;\r\n  aColores.forEach((element) => {\r\n    if (element.nombre == sColorPrincipal) {\r\n      sValor = element.valor;\r\n    }\r\n    if (element.nombre == sColorSecundario) sValorSecundario = element.valor;\r\n  });\r\n\r\n  CambiarColorPrimario(sColorPrincipal, sValor, true);\r\n  CambiarColorSecundario(sColorSecundario, sValorSecundario);\r\n}\r\n\r\nfunction CambiarColorPrimario(sColor, sValor, bInicio = false) {\r\n  // Cambia el color predominante de la web, cambiando la variable --main-color del css\r\n  localStorage.setItem(\"sColorPrimario\", sColor);\r\n  document.documentElement.style.setProperty(\"--main-color\", sValor);\r\n  iconoDefecto = L.icon({\r\n    iconUrl: `../images/marker-${sColor}.png`,\r\n    iconSize: [41, 41],\r\n  });\r\n  if (!bInicio) CargarMarcadores();\r\n  // document.getElementsByTagName(\"body\")[0].style.backgroundImage = `url('imagenes/background-${sColor}.png')`;\r\n}\r\n\r\nfunction CambiarColorSecundario(sColor, sValor) {\r\n  localStorage.setItem(\"sColorSecundario\", sColor);\r\n  document.documentElement.style.setProperty(\"--secondary-color\", sValor);\r\n}\r\n\r\nfunction CargarBotonesColor() {\r\n  // Carga los botones de los colores != mainColor\r\n  let divColoresPrincipales = document.getElementById(\"divColoresPrincipales\");\r\n  let divColoresSecundarios = document.getElementById(\"divColoresSecundarios\");\r\n\r\n  sColorPrincipal = localStorage.getItem(\"sColorPrimario\");\r\n  sColorSecundario = localStorage.getItem(\"sColorSecundario\");\r\n  aColores.forEach((oColor) => {\r\n    // Si no es el color principal, añade el botón\r\n    divColoresPrincipales.innerHTML += `<button class=\"color-button color-button-small\" style=\"background-color: ${oColor.valor}\" onclick=\"CambiarColorPrimario('${oColor.nombre}', '${oColor.valor}')\"></button>`;\r\n    divColoresSecundarios.innerHTML += `<button class=\"color-button color-button-small\" style=\"background-color: ${oColor.valor}\" onclick=\"CambiarColorSecundario('${oColor.nombre}', '${oColor.valor}')\"></button>`;\r\n  });\r\n}\r\n\r\n// Gif de ajustes en hover\r\n$(\".settings\").hover(function () {\r\n  $(this).css(\"background\", \"url(../images/settings.gif)\");\r\n  $(this).css(\"background-repeat\", \"no-repeat\");\r\n  $(this).css(\"background-position\", \"center\");\r\n  $(this).css(\"background-size\", \"3.5em\");\r\n});\r\n\r\n$(\".settings\").mouseleave(function () {\r\n  $(this).css(\"background\", \"url(../images/settings-stopped.gif)\");\r\n  $(this).css(\"background-repeat\", \"no-repeat\");\r\n  $(this).css(\"background-position\", \"center\");\r\n  $(this).css(\"background-size\", \"3.5em\");\r\n});\r\n\r\n// Eventos botón flotante\r\n$(\"#show\").on(\"mouseover\", function () {\r\n  $(\"#colores\").removeClass(\"hidden\");\r\n});\r\n$(\"#show\").on(\"mouseout\", function () {\r\n  $(\"#colores\").addClass(\"hidden\");\r\n});\r\n"],"names":["tTimeout","iconoDefecto","aBalizas","oTiempo","sColorPrincipal","sColorSecundario","bLogueado","aGuardados","Set","ObtenerBalizas","GetBalizas","then","data","JSON","parse","CargarMarcadores","CargarCartas","ObtenerTiempo","id","GetTiempo","oBaliza","find","element","codigo","console","log","AnadirTiempo","MostrarLogin","$","css","OcultarLogin","MostrarError","error","limitError","clearTimeout","text","removeClass","setTimeout","addClass","balizas","forEach","CargarColorInicial","sValor","sValorSecundario","aColores","nombre","valor","CambiarColorPrimario","CambiarColorSecundario","sColor","bInicio","localStorage","setItem","document","documentElement","style","setProperty","L","icon","iconUrl","iconSize","CargarBotonesColor","divColoresPrincipales","getElementById","divColoresSecundarios","getItem","oColor","innerHTML","ready","CargarLocalStorage","CargarMapa","click","toggle","hover","this","mouseleave","on"],"version":3,"file":"index.f9f97dcb.js.map"}